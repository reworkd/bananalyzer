!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue"),require("../../../../common/v1/src")):"function"==typeof def&&def.amd?def("pcs-menu-list-v1",["vue","../../../../common/v1/src"],t):((e=e||self).phw=e.phw||{},e.phw.PcsMenuListV1=t(e.Vue,e.PcsCommon))}(this,function(f,t){"use strict";f=f&&f.hasOwnProperty("default")?f.default:f,t=t&&t.hasOwnProperty("default")?t.default:t;var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var d="undefined"!=typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys;function h(n,o,r){(r?Reflect.getOwnMetadataKeys(o,r):Reflect.getOwnMetadataKeys(o)).forEach(function(e){var t=r?Reflect.getOwnMetadata(e,o,r):Reflect.getOwnMetadata(e,o);r?Reflect.defineMetadata(e,t,n,r):Reflect.defineMetadata(e,t,n)})}var v={__proto__:[]}instanceof Array;function y(e){"undefined"!=typeof console&&console.warn("[vue-class-component] "+e)}var m=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function o(e,o){void 0===o&&(o={}),o.name=o.name||e._componentTag||e.name;var r=e.prototype;Object.getOwnPropertyNames(r).forEach(function(t){if("constructor"!==t)if(-1<m.indexOf(t))o[t]=r[t];else{var n=Object.getOwnPropertyDescriptor(r,t);void 0!==n.value?"function"==typeof n.value?(o.methods||(o.methods={}))[t]=n.value:(o.mixins||(o.mixins=[])).push({data:function(){var e;return(e={})[t]=n.value,e}}):(n.get||n.set)&&((o.computed||(o.computed={}))[t]={get:n.get,set:n.set})}}),(o.mixins||(o.mixins=[])).push({data:function(){return function(o,e){var t=e.prototype._init;e.prototype._init=function(){var e=this,t=Object.getOwnPropertyNames(o);if(o.$options.props)for(var n in o.$options.props)o.hasOwnProperty(n)||t.push(n);t.forEach(function(t){"_"!==t.charAt(0)&&Object.defineProperty(e,t,{get:function(){return o[t]},set:function(e){o[t]=e},configurable:!0})})};var n=new e;e.prototype._init=t;var r={};return Object.keys(n).forEach(function(e){void 0!==n[e]&&(r[e]=n[e])}),!(e.prototype instanceof f)&&0<Object.keys(r).length&&y("Component class must inherit Vue or its descendant class when class property is used."),r}(this,e)}});var t=e.__decorators__;t&&(t.forEach(function(e){return e(o)}),delete e.__decorators__);var s,a,c,n,i,l=Object.getPrototypeOf(e.prototype),u=l instanceof f?l.constructor:f,p=u.extend(o);return s=p,a=e,c=u,Object.getOwnPropertyNames(a).forEach(function(e){if(!b[e]){var t=Object.getOwnPropertyDescriptor(s,e);if(!t||t.configurable){var n,o,r=Object.getOwnPropertyDescriptor(a,e);if(!v){if("cid"===e)return;var i=Object.getOwnPropertyDescriptor(c,e);if(n=r.value,o=typeof n,null!=n&&("object"==o||"function"==o)&&i&&i.value===r.value)return}0<=g.indexOf(e)&&y("Static property name '"+e+"' declared on class '"+a.name+"' conflicts with reserved property name of Vue internal. It may cause unexpected behavior of the component. Consider renaming the property."),Object.defineProperty(s,e,r)}}}),d&&(h(n=p,i=e),Object.getOwnPropertyNames(i.prototype).forEach(function(e){h(n.prototype,i.prototype,e)}),Object.getOwnPropertyNames(i).forEach(function(e){h(n,i,e)})),p}var g=["cid","super","options","superOptions","extendOptions","sealedOptions","component","directive","filter"],b={prototype:!0,arguments:!0,callee:!0,caller:!0};function e(t){return"function"==typeof t?o(t):function(e){return o(e,t)}}e.registerHooks=function(e){m.push.apply(m,e)};var r,i,s,a=function(){this.subMenuToggle="click"},c="pcs-menu-list-v1",l="ph-has-submenu",u="."+l,p="ph-nav-btn";function w(){this.constructor=i}function O(){var e=null!==r&&r.apply(this,arguments)||this;return e.elementTag=c,e.bindableModel=new a,e.phenomAppManager=t.PhenomAppManager,e}return{component:(r=t.BaseComponent,n(i=O,s=r),i.prototype=null===s?Object.create(s):(w.prototype=s.prototype,new w),O.prototype.widgetReady=function(){this.element=this.$el,this.populateHoverAttribute(),this.handleHoverStyles("hover","data-hover-style"),this.handleHoverStyles("subHover","data-subhover-style");for(var e=this.element&&this.element.querySelectorAll(u),t=0;t<e.length;t++)this.handleSubMenuToggle(e[t])},O.prototype.created=function(){},O.prototype.contentModelLoaded=function(){},O.prototype.fetch=function(){},O.prototype.isAddClass=function(e,t){var n=this.content&&this.content[this.contentId],o=n&&n.menuBlock,r=o&&o[e];if(r)for(var i in r)if("folderItems"==i){var s=r[i];if(s&&s[t]){for(var a in s[t])if("folderItems"==a){var c=s[t].folderItems;if(c)for(var l=0;l<c.length;l++)for(var u in c[l])if("folderItems"==u)return!0;return!0}return!1}}},O.prototype.handleSubMenuToggle=function(t){var n,o=this,r=t.querySelector(".ph-nav-btn");r&&(t&&this.bindableModel&&"click"===this.bindableModel.subMenuToggle?(document.body.addEventListener("click",this.closeMenus),document.body.addEventListener("keyup",this.closeMenus),r.addEventListener("click",this.handleDropdown),r.addEventListener("blur",this.handleBlur)):t&&this.bindableModel&&"hover"===this.bindableModel.subMenuToggle&&(t.addEventListener("mouseover",function(e){o.toggleMenu(t,r,!0),clearTimeout(n)}),r.addEventListener("focusin",this.handleDropdown),t.addEventListener("mouseout",function(e){n=setTimeout(function(){o.toggleMenu(t,r,!1)},200)}),r.addEventListener("blur",this.handleBlur)))},O.prototype.handleDropdown=function(e){var n=this.getDropDownElem(e.target),t=n&&this.getBtnElem(e.target);if(t&&t.focus(),n&&n.classList&&n.classList.contains("drop-down")&&(this.handleMainNavDropDown(n),"mobile"==this.deviceType&&this.$nextTick(function(){var e,t;n&&(null===(t=null===(e=n.querySelector(".arrow-left"))||void 0===e?void 0:e.parentElement)||void 0===t||t.focus())})),n&&n.classList&&n.classList.contains("folder-active"))try{for(var o=n.parentElement&&n.parentElement.querySelectorAll(".folder-active.active")||[],r=0;r<o.length;r++)!o[r].contains(e.target)&&t&&o[r]&&o[r].classList.contains("active")&&this.toggleMenu(o[r],t,!1)}catch(e){}n&&t&&n.classList.contains("active")?this.toggleMenu(n,t,!1):n&&t&&this.toggleMenu(n,t,!0)},O.prototype.handleBlur=function(e){return!0},O.prototype.handleClick=function(){this.$parent&&this.$parent.toggleMenu&&"mobile"==this.deviceType&&this.$parent.toggleMenu()},O.prototype.fetchElement=function(e,t){if(e&&t){var n=t.classList.contains(e);for(!n&&t.querySelector("."+e)&&(t=t.querySelector("."+e),n=!0);t&&!n&&"BODY"!==t.nodeName;)n=(null==(t=t.parentElement)?void 0:t.classList.contains(e))||!1;if(n)return t}},O.prototype.getDropDownElem=function(e){return this.fetchElement(l,e)},O.prototype.getBtnElem=function(e){return this.fetchElement(p,e)},O.prototype.toggleMenu=function(e,t,n){n?(e.classList&&e.classList.add("active"),e.classList.contains("drop-down")&&t.setAttribute("aria-expanded","true")):(e.classList&&e.classList.remove("active"),e.classList.contains("drop-down")&&t.setAttribute("aria-expanded","false"))},O.prototype.populateHoverAttribute=function(){var t=this;(this.$el.querySelectorAll("li")||[]).forEach(function(e){e.classList.contains("footer-menu-block")?e.classList.contains("footer-menu-block")&&0===e.querySelectorAll("li").length&&t.setHoverAttribute(e,"data-hover-style"):e.parentElement&&"menu-item-list"==e.parentElement.getAttribute("ph-settings-block")?t.setHoverAttribute(e,"data-hover-style"):t.setHoverAttribute(e,"data-subhover-style")})},O.prototype.setHoverAttribute=function(e,t){var n,o;Array.from(e.children).forEach(function(e){"A"===e.tagName&&(n=e),"BUTTON"===e.tagName&&(o=e)}),n?n.setAttribute(t,""):o&&o.setAttribute(t,"")},O.prototype.goBack=function(n){var o=this,e=this.element.querySelectorAll(u)||[];e&&e.forEach(function(e){e.classList&&e.classList.contains("active")&&e.classList.remove("active")}),this.$nextTick(function(){var e,t=o.element.querySelectorAll(".drop-down");t&&t[n]&&(null===(e=t[n].querySelector("button"))||void 0===e||e.focus())})},O.prototype.handleHoverStyles=function(r,e){var i;this.settings&&this.settings["menu-item"]&&(i=this.settings["menu-item"].attrs);var s=i&&i[r]&&i[r].class;this.$el.querySelectorAll("["+e+"]").forEach(function(n){var o;s?o=i[r].class:i&&i[r]&&(o=i[r].style),n.setAttribute(e,o),n.addEventListener("mouseover",function(e){if(s){var t=i[r].class;o.includes("hover")&&t.includes("hover")&&(t=i[r].class.split("-hover")[0]),n.classList.add(t)}else i&&i[r]&&(n.style.color=i[r].style);e.stopPropagation()}),n.addEventListener("mouseleave",function(e){if(s){var t=i[r].class;o.includes("hover")&&t.includes("hover")&&(t=i[r].class.split("-hover")[0]),n.classList.remove(t)}else n.style.color="";e.stopPropagation()})})},O.prototype.closeMenus=function(e){var t=!1,n=e.target.parentElement.classList;if(n.contains(l)||n.contains(p)||n.contains("sub-menu")||(t=!0),(n.contains("arrow-up")||n.contains("arrow-down")||n.contains("arrow-right"))&&(t=!1),this.phenomAppManager.isMobile()&&(t=!1),27===e.keyCode&&(t=!0),t)for(var o=this.element&&this.element.querySelectorAll(u),r=0;r<o.length;r++){var i=this.getDropDownElem(o[r]),s=i&&this.getBtnElem(o[r]);i&&s&&i.classList.contains("active")&&this.toggleMenu(i,s,!1)}return!0},O.prototype.handleMainNavDropDown=function(e){for(var t=this.element&&this.element.querySelectorAll(u),n=0;n<t.length;n++){var o=this.getDropDownElem(t[n]);if(o!=e){var r=o&&this.getBtnElem(t[n]);o&&r&&o.classList.contains("active")&&this.toggleMenu(o,r,!1)}}return!0},O=function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(s=(i<3?r(s):3<i?r(t,n,s):r(t,n))||s);return 3<i&&s&&Object.defineProperty(t,n,s),s}([e({name:c})],O))}});
