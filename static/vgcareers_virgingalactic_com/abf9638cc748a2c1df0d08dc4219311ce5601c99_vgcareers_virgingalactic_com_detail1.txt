!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue"),require("../../../../common/v1/src")):"function"==typeof def&&def.amd?def("pcs-header-v1",["vue","../../../../common/v1/src"],t):((e=e||self).phw=e.phw||{},e.phw.PcsHeaderV1=t(e.Vue,e.PcsCommon))}(this,function(h,n){"use strict";h=h&&h.hasOwnProperty("default")?h.default:h,n=n&&n.hasOwnProperty("default")?n.default:n;var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};var u="undefined"!=typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys;function f(o,n,i){(i?Reflect.getOwnMetadataKeys(n,i):Reflect.getOwnMetadataKeys(n)).forEach(function(e){var t=i?Reflect.getOwnMetadata(e,n,i):Reflect.getOwnMetadata(e,n);i?Reflect.defineMetadata(e,t,o,i):Reflect.defineMetadata(e,t,o)})}var y={__proto__:[]}instanceof Array;function m(e){"undefined"!=typeof console&&console.warn("[vue-class-component] "+e)}var g=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function i(e,n){void 0===n&&(n={}),n.name=n.name||e._componentTag||e.name;var i=e.prototype;Object.getOwnPropertyNames(i).forEach(function(t){if("constructor"!==t)if(-1<g.indexOf(t))n[t]=i[t];else{var o=Object.getOwnPropertyDescriptor(i,t);void 0!==o.value?"function"==typeof o.value?(n.methods||(n.methods={}))[t]=o.value:(n.mixins||(n.mixins=[])).push({data:function(){var e;return(e={})[t]=o.value,e}}):(o.get||o.set)&&((n.computed||(n.computed={}))[t]={get:o.get,set:o.set})}}),(n.mixins||(n.mixins=[])).push({data:function(){return function(n,e){var t=e.prototype._init;e.prototype._init=function(){var e=this,t=Object.getOwnPropertyNames(n);if(n.$options.props)for(var o in n.$options.props)n.hasOwnProperty(o)||t.push(o);t.forEach(function(t){"_"!==t.charAt(0)&&Object.defineProperty(e,t,{get:function(){return n[t]},set:function(e){n[t]=e},configurable:!0})})};var o=new e;e.prototype._init=t;var i={};return Object.keys(o).forEach(function(e){void 0!==o[e]&&(i[e]=o[e])}),!(e.prototype instanceof h)&&0<Object.keys(i).length&&m("Component class must inherit Vue or its descendant class when class property is used."),i}(this,e)}});var t=e.__decorators__;t&&(t.forEach(function(e){return e(n)}),delete e.__decorators__);var s,a,l,o,r,d=Object.getPrototypeOf(e.prototype),c=d instanceof h?d.constructor:h,p=c.extend(n);return s=p,a=e,l=c,Object.getOwnPropertyNames(a).forEach(function(e){if(!b[e]){var t=Object.getOwnPropertyDescriptor(s,e);if(!t||t.configurable){var o,n,i=Object.getOwnPropertyDescriptor(a,e);if(!y){if("cid"===e)return;var r=Object.getOwnPropertyDescriptor(l,e);if(o=i.value,n=typeof o,null!=o&&("object"==n||"function"==n)&&r&&r.value===i.value)return}0<=v.indexOf(e)&&m("Static property name '"+e+"' declared on class '"+a.name+"' conflicts with reserved property name of Vue internal. It may cause unexpected behavior of the component. Consider renaming the property."),Object.defineProperty(s,e,i)}}}),u&&(f(o=p,r=e),Object.getOwnPropertyNames(r.prototype).forEach(function(e){f(o.prototype,r.prototype,e)}),Object.getOwnPropertyNames(r).forEach(function(e){f(o,r,e)})),p}var v=["cid","super","options","superOptions","extendOptions","sealedOptions","component","directive","filter"],b={prototype:!0,arguments:!0,callee:!0,caller:!0};function e(t){return"function"==typeof t?i(t):function(e){return i(e,t)}}e.registerHooks=function(e){g.push.apply(g,e)};var t,r,s,a=function(){this.headerPosition=""},l="pcs-header-v1",d=["cookies_allow_click","cookies_decline_click","close_cvd_popup"],c='[as-element^="ph-cvd"][placement="header"] .ph-sticky-header',p='[as-element^="ph-cookie-popup"] .ph-sticky-header';function E(){this.constructor=r}function S(){var e=null!==t&&t.apply(this,arguments)||this;return e.elementTag=l,e.bindableModel=new a,e.covidBannerHeight="0",e.cookiePopupHeight="0",e.bodyPaddingTop="",e.showList=!1,e.bodyOverflow="",e.reorderSettings={},e.bodyElem=document.querySelector("body"),e.showSupport=!0,e.deviceType="",e.phenomAppManager=n.PhenomAppManager,e}return{component:(t=n.BaseComponent,o(r=S,s=t),r.prototype=null===s?Object.create(s):(E.prototype=s.prototype,new E),S.prototype.widgetReady=function(){var o=this;setTimeout(function(){o.$el&&o.$el.style&&(o.$el.style.minHeight=null,o.$el.style.height=null,o.$el.style.overflow=null)},50),this.reorderSettings=this.settings&&this.settings["header-additional-widgets"],this.reorderAdditionalWidgets(),this.addEventForHover();var e=document.querySelector(".ph-page");this.bodyElem&&this.getBodyElemTop(),"scrollSticky"!==this.bindModel.headerPosition&&"fixed"!==this.bindModel.headerPosition||(this.bodyElem&&(this.bodyElem.style.marginTop="0px"),e&&(e.style.marginTop="0px"),e&&(e.style.paddingTop="0px"),n.CommonService.trackWidgetCallBack(this.handleEventFlow)),"scrollSticky"===this.bindModel.headerPosition?(window.addEventListener("resize",this.initiateScrollSticky.bind(this)),document.addEventListener("scroll",this.initiateScrollSticky.bind(this))):"fixed"===this.bindModel.headerPosition&&(window.addEventListener("resize",function(){setTimeout(function(){o.setBodyHeight()},100)}),setTimeout(function(){var e=document.querySelector(c),t=document.querySelector(p);e||t?o.bodyElem&&(o.bodyElem.style.paddingTop=(e&&e.offsetHeight)+(t&&t.offsetHeight)+"px"):o.bodyElem&&(o.bodyElem.style.paddingTop="0px"),o.getBodyElemTop(),o.setBodyHeight()},250)),this.initiateEventListeners(),this.deviceType=this.phenomAppManager.getDeviceType(),document.addEventListener("openCreateProfilePopup",function(){"mobile"==o.deviceType&&o.toggleMenu()})},S.prototype.getHeaderOffSetHeight=function(){var e=document.querySelector("header");e&&(e.classList.contains("pcs-sticky-header")||e.classList.add("pcs-sticky-header"),this.headerOffsetHeight=e.offsetHeight||0)},S.prototype.handleNavigationTop=function(){var e=this.element.querySelector(".pcs-navigation > .container > .nav-main-bar"),t=document.querySelector("header"),o=null==t?void 0:t.querySelector('[data-ph-component-name="header-mega-menu-list"]');e&&t&&!o&&(e.style.top=this.bodyPaddingTop+(t.offsetHeight||0)+"px")},S.prototype.getBodyElemTop=function(){if(this.bodyElem){var e=parseInt((this.bodyElem.style.paddingTop||"").replace("px","")||"0");this.bodyPaddingTop=e,this.bodyElem.style.marginTop=null}},S.prototype.reorderAdditionalWidgets=function(){var t=this.element.querySelector('[data-ph-component-name="header-additional-widgets"]');if(t&&this.reorderSettings&&this.reorderSettings.custom&&this.reorderSettings.custom.reorder){var e=this.reorderSettings.custom.reorder,o=t.children||[];(e.map(function(e){return o[e-1]})||[]).forEach(function(e){e&&t.appendChild(e)})}},S.prototype.addStyle=function(e){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)},S.prototype.addEventForHover=function(){var c=this;["header-additional-widgets","header-additional-widgets2"].forEach(function(e){var t=c.settings&&c.settings[e];if(t){var o=c.element.querySelector('[data-ph-component-name="header-additional-widgets"]'),n=o&&o.querySelectorAll("li"),i=t.attrs&&t.attrs.hover?t.attrs.hover:null,r=i&&i.class,s=void 0;i&&(i.class&&-1!=i.class.indexOf("-hover")&&(r=i.class.split("-hover")[0]),s=r&&i.value?i.value:i.style);var a="dynamic-css"+Date.now();if(s){var l="."+a+":hover button.language-block * {  color : "+s+" !important; } ";if(l+="."+a+":hover a.create-account-link *{  color : "+s+" !important; } ",l+="."+a+":hover a.sign-in-link *{  color : "+s+" !important; } ",l+="."+a+":hover button.logged-in-btn .user-name{  color : "+s+" !important; } ",l+="."+a+":hover a.phs-job-cart-area * {  color : "+s+" !important; } ",l+="."+a+":hover a#support-click {  color : "+s+" !important; } ",c.addStyle(l),i&&n)for(var d=0;d<n.length;d++)n[d].classList.add(a)}}})},S.prototype.initiateScrollSticky=function(){var e=this.element.offsetTop||0;this.element.offsetTop||(e=this.element.offsetParent&&this.element.offsetParent.offsetTop||0),this.element&&window.pageYOffset>e?this.element.classList.contains("ph-sticky-block-fixed")||(this.currentStickyHeight=this.element.offsetHeight,this.element.classList.add("ph-sticky-block-fixed"),this.setBodyHeight(!0)):(this.element.classList.remove("ph-sticky-block-fixed"),this.bodyElem&&(this.bodyElem.style.paddingTop=this.prevbodyTop+"px"),this.element.style.top=null,this.element.style.zIndex=null,this.nextElementSibling&&this.nextElementSibling.style&&this.nextElementSibling.style.paddingTop&&(this.nextElementSibling.style.paddingTop=null))},S.prototype.handleEventFlow=function(e){var o=this;e&&this.bodyElem&&-1!==d.indexOf(e)&&setTimeout(function(){var e=document.querySelector(c),t=document.querySelector(p);e||t&&(t.style.top="0px"),o.bodyElem.style.paddingTop=(e&&e.offsetHeight)+(t&&t.offsetHeight)+"px",o.getBodyElemTop(),o.setBodyHeight()},"close_cvd_popup"!=e?750:0)},S.prototype.widgetViewLoaded=function(){this.element=this.$el},S.prototype.created=function(){},S.prototype.focusTrapped=function(){var o=this,e=this.element&&this.element.querySelectorAll("a[href]:not([disabled]), button:not([disabled])");if(e.length){var n=e[0],i=e[e.length-1];n.addEventListener("focusout",function(e){var t;(null===(t=o.element)||void 0===t?void 0:t.contains(e.relatedTarget))||i.focus()}),i.addEventListener("focusout",function(e){var t;(null===(t=o.element)||void 0===t?void 0:t.contains(e.relatedTarget))||n.focus()})}},S.prototype.toggleMenu=function(){var t=this;this.showList=!this.showList;var e=document.querySelector("body");if(this.showList,this.showList){this.bodyOverflow=e&&e.style.overflow||"",e&&(e.style.overflow="hidden");var o=document.querySelector("header"),n=this.element.querySelector('[data-ph-component-name="header-menu-list"]');document.addEventListener("ph:gdpr:consent:closed",function(){setTimeout(function(){n&&(n.style.top=o.offsetHeight+o.offsetTop+"px")},30)}),n&&(n.style.top=o.offsetHeight+o.offsetTop+"px")}else e&&(e.style.overflow=this.bodyOverflow);this.$nextTick(function(){setTimeout(function(){var e=t.element.querySelector(".mobile-menu");null==e||e.blur(),null==e||e.focus()},30)}),this.handleNavigationTop()},S.prototype.handleSkipFocus=function(){var e=this.element.querySelector(".skip-main");e&&(e.style.height="40px")},S.prototype.handleSkipBlur=function(){var e=this.element.querySelector(".skip-main");e&&(e.style.height="auto")},S.prototype.destroyed=function(){document.removeEventListener("scroll",this.initiateScrollSticky)},S.prototype.setBodyHeight=function(e){if("scrollSticky"===this.bindModel.headerPosition&&(e=!0),this.element.classList.contains("ph-sticky-block-fixed")&&e&&"fixed"!==this.bindModel.headerPosition){if(this.getBodyElemTop(),this.element.style.top=this.bodyPaddingTop+"px",this.element.style.zIndex=999,!this.nextElementSibling){var t=this.element;for(this.nextElementSibling=t.nextElementSibling;t&&"BODY"!=t.nodeName&&!this.nextElementSibling;)t=t.parentElement,this.nextElementSibling=t.nextElementSibling}this.nextElementSibling&&(this.nextElementSibling.style.paddingTop=this.element.offsetHeight+"px")}else if(!e){this.getHeaderOffSetHeight();var o=document.querySelector("header");this.bodyElem&&(this.bodyElem.style.paddingTop=this.bodyPaddingTop+("transparent"==this.bindModel.headerType?0:this.headerOffsetHeight)+"px"),o&&(o.style.top=this.bodyPaddingTop+"px")}},S.prototype.initiateEventListeners=function(){var t=this;n.EventBus.$on("PCS:SUPPORT-ENABLED",function(e){e.enable||(t.showSupport=!1)}),document.addEventListener("mouseup",this.blurHandlerMobile)},S.prototype.blurHandlerMobile=function(e){var t=this,o=e.target&&e.target.target&&e.target.closest(".nav-main-bar"),n=this.$el.querySelector(".mobile-menu"),i=e.target.href||"",r=window.location.pathname||"";setTimeout(function(){t.showList&&o&&n&&(!o&&!n.contains(e.target)||-1!==i.indexOf(r)&&-1===i.indexOf("javascript"))&&t.toggleMenu()},10)},S=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;0<=a;a--)(i=e[a])&&(s=(r<3?i(s):3<r?i(t,o,s):i(t,o))||s);return 3<r&&s&&Object.defineProperty(t,o,s),s}([e({name:l})],S))}});
